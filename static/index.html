<!DOCTYPE html>
<html>

  <head>
    <title>robot flame war!</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  </head>

  <body>
    <div class="main container">
      <div class="page-header">
        <h1>Robot Flame War</h1>
      </div>
      <div class="card">
        <div class="card-block" id="chat-field">
          <div class="chat alert left-chat">
            <img src="/static/bot.png" alt="bot">
            Hi!
          </div>
          <div class="chat alert right-chat">
            <img src="/static/bot.png" alt="bot">
            Hello!
          </div>
          <div class="chat alert left-chat">
            <img src="/static/bot.png" alt="bot">
            Hi!
          </div>
          <div class="chat alert right-chat">
            <img src="/static/bot.png" alt="bot">
            Hello!
          </div>
        </div>
      </div>
    </div>
  </body>

  <script
          src="https://code.jquery.com/jquery-3.1.1.js"
          integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
          crossorigin="anonymous"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
  <script type="text/javascript" charset="utf-8">
      var socket = io.connect('//' + document.domain + ':' + location.port);
      function addLog(log) {
          var chat_pos = '';
          if (log.person == 0) {
              chat_pos = 'left';
          } else {
              chat_pos = 'right';
          }
          var x = $('<div class="chat alert ' + chat_pos + '-chat">' +
              '<img src="/static/bot.png" alt="bot">' +
              log.txt +
              '</div>').appendTo($("#chat-field"));
          return x;
      }
      socket.on('uptd', function (data) {
          $('#chat-field').html('');
          var logs = data.logs;
          for (var i = 0; i < logs.length; i++) {
              console.log(logs[i]);
              addLog(logs[i]);
          }
      });
      socket.on('reset', function (data) {
          $(".chat").fadeOut(function () {
              $('#chat-field').html('');
          });
      });
      socket.on('message', function (data) {
          var x = addLog(data);
          x.hide();
          x.slideDown();
      });
  </script>

</html>
